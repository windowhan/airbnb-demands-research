# Airbnb Anti-Scraping Measures Research (2024-2026)

## 1. HTTP Status Codes Returned When Blocking Scrapers

Airbnb uses multiple HTTP response codes and non-standard blocking mechanisms to deter scrapers:

### Standard HTTP Status Codes

| Status Code | Meaning | Airbnb Context |
|-------------|---------|----------------|
| **403 Forbidden** | "You look like a bot" (quality block) | The most common block. Returned by Akamai Bot Manager when the request fails fingerprint/header checks. Often displayed as "Pardon Our Interruption" or "Access Denied" page. |
| **429 Too Many Requests** | "You are too fast" (quantity block) | Rate limiting triggered when too many requests come from a single IP/session within a time window. May include a `Retry-After` header. |
| **503 Service Unavailable** | Server-side block disguised as overload | Sometimes returned deliberately (not genuine server issue) when anti-bot system wants to reject without revealing detection. |
| **200 OK (with block content)** | Stealth block | Akamai can return HTTP 200 but serve a CAPTCHA page, JavaScript challenge, or empty/skeleton content instead of real data. This is the most deceptive form of blocking. |

### Non-Standard Blocking Behaviors

| Behavior | Description |
|----------|-------------|
| **CAPTCHA challenge pages** | Served inline (HTTP 200) or as redirects. Often reCAPTCHA or hCaptcha. Triggered by suspicious behavioral patterns. |
| **JavaScript challenges** | An intermediate challenge page that requires JS execution to proceed. Filters out simple HTTP-only scrapers. |
| **Grey skeleton pages** | The page loads with HTTP 200 but only the skeleton UI renders -- no actual listing data appears. Common with headless browsers that fail fingerprinting. |
| **Empty/partial API responses** | GraphQL API returns 200 but with empty data arrays or truncated results. |
| **Redirect to login/error pages** | Some requests get 302 redirected to login pages or generic error pages. |

### Key Insight
> A 403 is not always about rate limiting -- it can also be triggered by fingerprint mismatch (wrong headers, detected automation). A 429 is specifically about request frequency. However, Airbnb sometimes returns 403 for rate limiting as well, intentionally obscuring the reason.

---

## 2. Common Triggers for Getting Blocked

### 2.1 Request Frequency Triggers
- **High request rate from a single IP**: More than ~100 pages/hour from one IP.
- **Burst patterns**: Sending many requests in rapid succession, then pausing. Humans don't browse this way.
- **Consistent timing**: Requests at exact intervals (e.g., every 2.000 seconds) are a dead giveaway. Human browsing has natural variance.
- **High concurrency**: Many simultaneous connections from the same IP.

### 2.2 Technical Fingerprint Triggers
- **Data center IP addresses**: Blocked almost instantly by Akamai. Residential IPs are far more successful.
- **Missing or inconsistent HTTP headers**: Incomplete header sets (no `Accept-Language`, no `Referer`, wrong `Accept` headers).
- **Known bot User-Agent strings**: Python `requests` default UA, `curl`, `wget`, etc.
- **TLS/JA3 fingerprint mismatch**: The TLS handshake fingerprint of Python `requests`/`httpx` differs from real browsers. Akamai checks JA3 hashes.
- **Missing `_abck` cookie**: Akamai Bot Manager requires a valid `_abck` cookie generated by executing its JavaScript (`sensor_data` submission).
- **WebDriver detection**: `navigator.webdriver = true` in headless browsers triggers instant blocks.
- **Canvas/WebGL fingerprint anomalies**: Headless browsers have detectable rendering differences.

### 2.3 Behavioral Triggers
- **No mouse movements or scrolling**: Akamai and Cloudflare track user interactions. No engagement = bot signal.
- **Sequential page access patterns**: Scraping listing #1, #2, #3, #4 in order is unnatural.
- **Accessing only listing/API pages**: Never visiting the homepage, search pages, or static assets.
- **No cookie/session continuity**: Each request having a fresh session with no browsing history.
- **Ignoring robots.txt**: Making requests to paths blocked in robots.txt raises flags.

### 2.4 Content/Pattern Triggers
- **Scraping too many pages from the same area**: Geographic concentration of requests.
- **Accessing GraphQL API directly without browser context**: Missing required cookies, tokens, or the API key.
- **Repeated identical search queries**: Same parameters over and over.
- **Not loading associated resources**: Real browsers load CSS, JS, images. Scrapers skip them.

---

## 3. Known Strategies to Avoid Being Blocked

### 3.1 IP/Network Level

| Strategy | Details |
|----------|---------|
| **Residential proxy rotation** | Use residential proxies (not data center). Rotate per session, not per request. Data center IPs are blacklisted almost instantly. |
| **Geographic proxy matching** | Use proxies from the same region as the target search (e.g., South Korean IPs for Seoul listings). |
| **Session-based rotation** | Maintain the same IP for a complete "session" (multiple page views), then rotate. Per-request rotation looks suspicious. |
| **ISP/mobile proxies** | Higher trust scores than residential proxies. More expensive but less likely to be blocked. |

### 3.2 Browser/Request Level

| Strategy | Details |
|----------|---------|
| **Headless browser with stealth** | Use Playwright or Puppeteer with stealth plugins (`playwright-extra` + `stealth` plugin, `puppeteer-extra-plugin-stealth`). Required because Airbnb is a React SPA. |
| **TLS fingerprint spoofing** | Use `curl_cffi` (Python) or modify TLS settings to match real browser JA3 fingerprints. |
| **Full header set rotation** | Rotate realistic `User-Agent`, `Accept`, `Accept-Language`, `Accept-Encoding`, `Sec-Fetch-*` headers. Headers must be internally consistent (e.g., Chrome UA with Chrome-specific headers). |
| **Cookie management** | Maintain cookies across requests within a session. Accept and send all cookies Airbnb sets, including `_abck`, `bev_token`, etc. |
| **Disable WebDriver flag** | Inject JS to set `navigator.webdriver = false` before page loads. |

### 3.3 Behavioral Mimicry

| Strategy | Details |
|----------|---------|
| **Randomized delays** | 5-10 seconds between requests, with random jitter (not fixed intervals). |
| **Human-like browsing patterns** | Visit homepage first, then search, then listings. Don't jump directly to API endpoints. |
| **Mouse movement simulation** | Generate realistic mouse movements and scrolling events on the page. |
| **Random page interaction** | Occasionally click on non-essential elements, hover over items. |
| **Session warmup** | Load a few normal pages before beginning data extraction. |
| **Off-peak scraping** | Scrape during low-traffic hours (e.g., 2-4 AM local time). Server monitoring is less aggressive. |

### 3.4 API-Level Strategies

| Strategy | Details |
|----------|---------|
| **Use internal GraphQL API** | Monitor network tab to find Airbnb's v3 GraphQL endpoints (`StaysSearch`, `PdpAvailabilityCalendar`, `StayListing`). Responses are cleaner than HTML parsing. |
| **Extract API key from browser** | The `key` parameter required for API calls can be found in Chrome DevTools network tab during normal Airbnb searches. |
| **Maintain valid session tokens** | Extract and reuse authentication-adjacent tokens from browser sessions. |
| **Price-range binning** | Airbnb limits results to ~300 per search. Split queries into price-range bins (e.g., $0-75, $75-150, etc.) to get complete coverage. |

### 3.5 Error Handling

| Strategy | Details |
|----------|---------|
| **Exponential backoff** | On 429/503: wait 1s, 2s, 4s, 8s, 16s... with random jitter. |
| **Respect `Retry-After` header** | If present in 429 responses, honor the specified wait time. |
| **IP rotation on persistent 403** | If 403 persists after backoff, rotate to a new IP/proxy. |
| **CAPTCHA detection and handling** | Detect CAPTCHA pages (check response content, not just status code). Either pause for manual solving or integrate a CAPTCHA-solving service (2Captcha, CapSolver, etc.). |
| **Monitor success rate** | Track the ratio of successful vs. blocked requests. If success rate drops below a threshold, automatically slow down or switch proxies. |

---

## 4. Anti-Bot Services Used by Airbnb

### Primary: Akamai Bot Manager

Airbnb's primary anti-bot protection is **Akamai Bot Manager**. This is confirmed across multiple sources.

**How Akamai Bot Manager works on Airbnb:**

1. **`sensor_data` collection**: Akamai injects JavaScript that collects extensive telemetry:
   - Device/browser fingerprint (screen size, fonts, plugins, WebGL renderer)
   - Behavioral data (mouse movements, keystrokes, scroll patterns, touch events)
   - Network characteristics (connection type, latency)
   - Timing data (page load timing, interaction intervals)

2. **`_abck` cookie generation**: The collected `sensor_data` is submitted to Akamai's servers, which return an `_abck` cookie. This cookie gates access to protected endpoints.

3. **`akamai-bm-telemetry` parameter**: Additional telemetry data sent with subsequent requests.

4. **TLS/JA3 fingerprint analysis**: Akamai analyzes the TLS handshake fingerprint to determine if the client is a real browser or a script/library.

5. **IP reputation scoring**: Akamai maintains a global database of IP reputation. Data center IPs, known VPN/proxy IPs, and previously-flagged IPs get lower trust scores.

### Secondary/Supplementary Protections

| Service/Mechanism | Role |
|-------------------|------|
| **Cloudflare** | Some sources mention Cloudflare in addition to Akamai. May be used for specific subdomains or as a CDN layer. |
| **Custom ML models** | Airbnb likely has in-house ML models for bot detection, analyzing behavioral patterns at scale. |
| **robots.txt enforcement** | Airbnb's robots.txt blocks many paths that scrapers commonly target. |
| **GraphQL API obfuscation** | Frequent changes to API structure, endpoint names, and required parameters. |
| **CSS class name rotation** | HTML class names are frequently randomized, breaking CSS-selector-based scrapers. |
| **React-based SPA** | Client-side rendering means raw HTTP requests return empty shells. Requires JavaScript execution. |

---

## 5. Safe Request Rate Recommendations

### Conservative Rates (Recommended for Long-Term Scraping)

| Parameter | Recommendation | Rationale |
|-----------|---------------|-----------|
| **Pages per hour per IP** | 50-100 max | Multiple sources cite 100 pages/hour as the upper safe limit |
| **Delay between requests** | 5-10 seconds (randomized) | Fixed delays are detectable; add 20-50% random jitter |
| **Concurrent connections per IP** | 1-2 | Conservative approach for Airbnb specifically |
| **Sessions per IP before rotation** | 20-50 requests | Then rotate to a new IP |
| **Daily limit per IP** | 500-1000 requests | Spread across the day with breaks |

### Rate Strategy for This Project (Seoul Metro Stations)

Given the project scope (~300 stations, hourly snapshots, daily calendars):

**Hourly search snapshots (priority stations = ~30):**
```
30 stations x 1 search each = 30 requests/hour
At 1 request per 10 seconds = ~5 minutes of scraping per hour
Status: SAFE with a single residential IP
```

**Hourly search snapshots (all 300 stations):**
```
300 stations x 1 search each = 300 requests/hour
At 1 request per 10 seconds = ~50 minutes per hour
Status: RISKY with a single IP. Requires 3-5 rotating residential proxies.
```

**Daily calendar crawling (all listings):**
```
If 5,000 listings x 1 calendar request each = 5,000 requests
At 1 request per 8 seconds = ~11 hours
Status: Requires 5-10 rotating residential proxies + off-peak timing
```

### Recommended Rate Limiting Implementation

```python
# Suggested configuration for proxy_manager.py / settings.py

RATE_LIMIT_CONFIG = {
    # Base delay between requests (seconds)
    "base_delay": 7,
    # Random jitter range added to base_delay (seconds)
    "jitter_range": (2, 8),  # Total delay: 9-15 seconds
    # Max concurrent requests per proxy
    "max_concurrent_per_proxy": 1,
    # Max requests per proxy before rotation
    "max_requests_per_proxy": 30,
    # Cooldown after proxy rotation (seconds)
    "proxy_cooldown": 60,
    # Exponential backoff config
    "backoff_base": 2,
    "backoff_max": 300,  # 5 minutes max wait
    # Success rate threshold to trigger slowdown
    "success_rate_threshold": 0.85,
    # Circuit breaker: pause all scraping if N consecutive failures
    "circuit_breaker_threshold": 5,
    "circuit_breaker_cooldown": 600,  # 10 minutes
}
```

### Response Handling Matrix

| Response | Action |
|----------|--------|
| 200 + valid data | Success. Continue with normal delay. |
| 200 + CAPTCHA/skeleton | Soft block detected. Rotate proxy. Increase delay. |
| 403 | Hard block. Rotate proxy immediately. Apply exponential backoff. |
| 429 | Rate limited. Respect `Retry-After` header if present, otherwise exponential backoff. |
| 503 | Likely anti-bot block. Treat same as 429. |
| Connection timeout | Network issue or IP block. Retry once, then rotate proxy. |
| 302 to login/error | Session invalidated. Create new session on new proxy. |

---

## 6. Additional Findings

### Airbnb Result Limits
- Web search results are limited to **300 listings** per query.
- API results are limited to **1,000 listings** per query.
- Workaround: Use price-range binning to split queries and capture all listings.

### Airbnb API Endpoints (v3 GraphQL)
The internal API endpoints referenced in the PLAN.md are correct:
- `GET /api/v3/StaysSearch` - Search listings
- `GET /api/v3/PdpAvailabilityCalendar` - Calendar/availability
- `GET /api/v3/StayListing` - Listing details

These require:
- A valid API key (extractable from browser DevTools)
- Proper session cookies (including Akamai's `_abck`)
- Correct headers mimicking a browser request

### API Key Discovery
The API key can be found by:
1. Opening Chrome DevTools on airbnb.com
2. Going to the Network tab
3. Performing a search
4. Looking for XHR/Fetch requests to `/api/v3/`
5. Finding the `key` parameter in the request URL

### Legal Context
Airbnb's Terms of Service explicitly prohibit automated data collection. This project should:
- Keep scraping rates conservative
- Use data only for personal research purposes
- Not redistribute raw scraped data
- Respect robots.txt where practical

---

## Sources

- [Best Practices for Airbnb Data Scraping in 2025 - ScrapeLead](https://scrapelead.io/blog/best-practices-for-airbnb-data-scraping-in-2025/)
- [Everything You Need to Know About Web Scraping Airbnb in 2025 - Multilogin](https://multilogin.com/blog/web-scraping-airbnb/)
- [Airbnb Web Scraping Explained: Step-by-Step Guide - Decodo](https://decodo.com/blog/airbnb-web-scraping)
- [How to Scrape Airbnb Listings and Prices (2025 Guide) - Automatio](https://automatio.ai/how-to-scrape/airbnb)
- [How To Scrape Airbnb: The Ultimate Guide For 2024 - ExpertBeacon](https://expertbeacon.com/how-to-scrape-airbnb-the-ultimate-guide-for-2024/)
- [How to Scrape Airbnb Listing Data With Python - Oxylabs](https://oxylabs.io/blog/how-to-scrape-airbnb)
- [Airbnb status code 403: How to access resources and get unbanned - PureVPN](https://www.purevpn.com/blog/airbnb-status-code-fix/)
- [Status code 403 - Airbnb Community](https://community.withairbnb.com/t5/Support-with-your-bookings/Status-code-403/m-p/1808513)
- [How to Bypass Akamai when Web Scraping in 2026 - Scrapfly](https://scrapfly.io/blog/posts/how-to-bypass-akamai-anti-scraping)
- [Decoding Akamai 2.0 Anti-Scraping: sensor_data and akamai-bm-telemetry - Medium](https://medium.com/@240942649/decoding-akamai-2-0-418e7c7fa0a0)
- [Notes for bypassing anti-bot on Cloudflare, Akamai - GitHub Gist](https://gist.github.com/0xdevalias/b34feb567bd50b37161293066dd53)
- [digital-engineering/airbnb-scraper - GitHub](https://github.com/digital-engineering/airbnb-scraper)
- [oxylabs/how-to-scrape-airbnb - GitHub](https://github.com/oxylabs/how-to-scrape-airbnb)
- [The Lab #5 - Scraping Airbnb.com using GraphQL - Substack](https://substack.thewebscraping.club/p/the-lab-5-scraping-airbnbcom-using)
- [Airbnb web scraping with ScrapingBee: 2026 step-by-step guide - ScrapingBee](https://www.scrapingbee.com/blog/how-to-web-scrape-airbnb-data/)
- [How to scrape AirBnb - Full Guide 2026 - Bright Data](https://brightdata.com/blog/how-tos/how-to-scrape-airbnb-guide)
- [Airbnb Scraping 2025: Complete Guide - Nextbrowser](https://nextbrowser.com/blog/airbnb-scraping-the-complete-guide-2025)
- [402, 403, 404, and 429 Errors in Web Scraping - CapSolver](https://www.capsolver.com/blog/web-scraping/402-403-404-429-errors-web-scraping)
- [Rate Limit in Web Scraping: How It Works and 5 Bypass Methods - Scrape.do](https://scrape.do/blog/web-scraping-rate-limit/)
- [Outsmarting Akamai's Bot Detection with JA3Proxy - HackerNoon](https://hackernoon.com/outsmarting-akamais-bot-detection-with-ja3proxy)
